apiVersion: 1.0.0
metadata:
  name: world_query
projects:
  - name: nodejs-web-app
    git:
      location: "https://gitlab.com/rgdacosta/ocp-apps.git"
      sparseCheckoutDir: world_query
components:
  - type: container
    image: "node:14"
    alias: runtime
    memoryLimit: 512Mi
    mountSources: true
    endpoints:
      - name: "nodejs"
        port: 3000
    env:
      - name: WORLD_HOST
        value: worlddb
      - name: WORLD_DATABASE
        value: world
      - name: WORLD_USER
        value: ricardo
      - name: WORLD_PASSWORD
        value: redhat123
commands:
  - id: install
    exec:
      component: runtime
      commandLine: "npm install"
      workingDir: ${CHE_PROJECTS_ROOT}/nodejs-web-app
  - id: run
    exec:
      component: runtime
      commandLine: "npm start"
      workingDir: ${CHE_PROJECTS_ROOT}/nodejs-web-app
